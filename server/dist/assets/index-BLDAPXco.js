var U=Object.defineProperty;var H=(t,r,e)=>r in t?U(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e;var S=(t,r,e)=>H(t,typeof r!="symbol"?r+"":r,e);import{j as w,i as Q,k as N,r as c,l as K,m as X}from"./index-CbJBIGMc.js";const Y=({title:t,value:r,detailsText:e,bgColor:n})=>w.jsxs("div",{className:`flex flex-col justify-center gap-2 pl-8 text-white ${n} w-full h-44 rounded-lg hover:bg-black select-none transition-all duration-300 ease-in-out`,children:[w.jsx("h2",{className:"text-lg rubik-font",children:t}),w.jsxs("span",{className:"font-bold text-4xl rubik-font",children:["$",r]}),w.jsx(Q,{to:"/finances",children:w.jsx("span",{className:"cursor-pointer hover:underline",children:e})})]});function J(t){const[r,e]=c.useState(!0),[n,a]=c.useState(null),[o,s]=c.useState(!1),g=()=>{e(!1),s(!0)};return c.useEffect(()=>{if(!document){const m=new Error(`[ScriptLoadingError] document not defined when attempting to load ${t}`);a(m);return}const l=document.querySelector(`script[src="${t}"]`);if(l!=null&&l.dataset.loaded){g();return}const i=l||document.createElement("script");l||(i.src=t);const h=()=>{i.dataset.loaded="1",g()};i.addEventListener("load",h),i.addEventListener("error",m=>{console.error("Failed to load script:",t,m);const f=new Error(`[ScriptLoadingError] Failed to load script: ${t}`);a(f)}),l||document.head.append(i)},[]),{isLoading:r,error:n,isSuccess:o}}const Z=t=>t&&t.charts,k=(t,r)=>{const{controls:e,toolbarItems:n,getChartEditor:a}=t;return r&&r.charts&&r.visualization&&r.visualization.ChartWrapper&&r.visualization.Dashboard&&(!e||r.visualization.ChartWrapper)&&(!a||r.visualization.ChartEditor)&&(!n||r.visualization.drawToolbar)},_=t=>window.google;function G(t){const{chartVersion:r="current",chartPackages:e=["corechart","controls"],chartLanguage:n="en",mapsApiKey:a}=t,[o,s]=c.useState(null),[g,l]=c.useState(null),[i,h]=c.useState(null),{isLoading:m,error:f,isSuccess:u}=J(t.chartLoaderScriptUrl||"https://www.gstatic.com/charts/loader.js");return c.useEffect(()=>{if(!u)return;const C=_();if(!Z(C)){const T=new Error("[ScriptInitializationError] Script loaded but Google not attached to window.");l(T);return}if(k(t,C)){s(C);return}C.charts.load(r,{packages:e,language:n,mapsApiKey:a}),C.charts.setOnLoadCallback(()=>{if(!k(t,C)){const T=new Error("[GoogleChartsInitializationError] Google Charts not ready after load callback.");console.error(T),h(T);return}s(C)})},[u]),{error:f||g||i,isLoading:m,google:o}}const q={legend_toggle:!1,options:{},legendToggle:!1,getChartWrapper:()=>{},spreadSheetQueryParameters:{headers:1,gid:1},rootProps:{},chartWrapperParams:{},chartLoaderScriptUrl:"https://www.gstatic.com/charts/loader.js"},tt=t=>{const{isReady:r,chartControls:e,filter:n}=t;return!r||!e||!(e!=null&&e.length)?null:N.createElement(N.Fragment,null,e.filter(a=>{let{controlProp:o,control:s}=a;return n?n({control:s,controlProp:o}):!0}).map(a=>{let{control:o}=a;return N.createElement("div",{key:o.getContainerId(),id:o.getContainerId()})}))};let O=0;const B=()=>(O+=1,`reactgooglegraph-${O}`),D=class D{};S(D,"initializeControls",r=>{for(let e=0;e<r.length;e+=1){const{controlType:n,options:a,controlWrapperParams:o}=r[e].controlProp;o&&"state"in o&&r[e].control.setState(o.state),r[e].control.setOptions(a),r[e].control.setControlType(n)}}),S(D,"listenToControlEvents",(r,e)=>{const{google:n}=e;return r.flatMap(a=>{const{control:o,controlProp:s}=a,{controlEvents:g=[]}=s;return g.map(l=>{const{callback:i,eventName:h}=l;return n.visualization.events.addListener(o,h,function(){for(var m=arguments.length,f=new Array(m),u=0;u<m;u++)f[u]=arguments[u];i({chartWrapper:null,controlWrapper:o,props:e,google:n,eventArgs:f})})})})}),S(D,"createControlId",r=>{let e;return typeof r>"u"?e=`googlechart-control-${B()}`:e=r,e}),S(D,"createChartControls",r=>{const{controls:e,google:n}=r;return e?e.map((a,o)=>{const{controlID:s,controlType:g,options:l,controlWrapperParams:i}=a,h=D.createControlId(s);return{controlProp:a,control:new n.visualization.ControlWrapper({containerId:h,controlType:g,options:l,...i})}}):null}),S(D,"addControls",r=>{const{chartWrapper:e,chartDashboard:n}=r,a=D.createChartControls(r);return!a||!n||!e?null:(n.bind(a.map(o=>{let{control:s}=o;return s}),e),D.initializeControls(a),a)});let R=D;const et=t=>{const[r,e]=c.useState(null);return[c.useMemo(()=>!r||!t?null:t.map((a,o)=>{const s=r[o];return s?{controlProp:a,control:s}:void 0}).flatMap(a=>a?[a]:[]),[r,t]),e]},rt=(t,r)=>{c.useEffect(()=>{const e=R.listenToControlEvents(t??[],r);return()=>{e.forEach(n=>{r.google.visualization.events.removeListener(n)})}},[t,r])},at=t=>{const[r,e]=et(t.controls);return rt(r??[],t),{addControls:a=>{const o=R.addControls(a);e((o==null?void 0:o.map(s=>s.control))??null)},renderControl:a=>{const{chartWrapper:o,chartDashboard:s}=t;return c.createElement(tt,{...t,isReady:!!(o&&s),chartControls:r,filter:a})}}},ot=t=>{const r=c.useRef(null);return{chartId:(()=>{const{graphID:a,graph_id:o}=t,s=a||o;let g;return s?g=s:g=r.current||B(),r.current=g,r.current})()}},nt=["#3366CC","#DC3912","#FF9900","#109618","#990099","#3B3EAC","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC","#E67300","#8B0707","#329262","#5574A6","#3B3EAC"],st=async function(t,r){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise((n,a)=>{const o=`${e.headers?`headers=${e.headers}`:"headers=0"}`,s=`${e.query?`&tq=${encodeURIComponent(e.query)}`:""}`,g=`${e.gid?`&gid=${e.gid}`:""}`,l=`${e.sheet?`&sheet=${e.sheet}`:""}`,i=`${e.access_token?`&access_token=${e.access_token}`:""}`,h=`${o}${g}${l}${s}${i}`,m=`${r}/gviz/tq?${h}`;new t.visualization.Query(m).send(u=>{u.isError()?a(`Error in query:  ${u.getMessage()} ${u.getDetailedMessage()}`):n(u.getDataTable())})})},it="#CCCCCC",x=class x{};S(x,"grayOutHiddenColumnsLabel",(r,e)=>{const{googleChartWrapper:n,options:a}=r;if(!n){console.error("googleChartWrapper is not defined");return}const o=n.getDataTable();if(!o)return;const s=o.getNumberOfColumns();if(e.length>0===!1)return;const l=Array.from({length:s-1}).map((i,h)=>{const m=x.getColumnId(o,h+1);return e.includes(m)?it:a&&a.colors?a.colors[h]:nt[h]});n.setOptions({...a,colors:l}),n.draw()}),S(x,"listenToLegendToggle",(r,e)=>{const[n,a]=e,{google:o,googleChartWrapper:s}=r;if(!s){console.error("googleChartWrapper is not defined");return}return o.visualization.events.addListener(s,"select",()=>{const l=s.getChart().getSelection(),i=s.getDataTable();if(l.length===0||l[0].row!==null||!i)return;const h=l[0].column,m=x.getColumnId(i,h);n!=null&&n.includes(m)?a(f=>[...f.filter(u=>u!==m)]):a(f=>[...f,m])})}),S(x,"draw",async r=>{const{data:e,diffdata:n,rows:a,columns:o,options:s,chartType:g,formatters:l,spreadSheetUrl:i,spreadSheetQueryParameters:h,googleChartDashboard:m,googleChartWrapper:f,google:u,hiddenColumns:C,legendToggle:T,legend_toggle:P}=r;if(!f){console.error("draw was called with googleChartWrapper = null");return}let v,p=null;if(n){const I=u.visualization.arrayToDataTable(n.old),y=u.visualization.arrayToDataTable(n.new);p=u.visualization[g].prototype.computeDiff(I,y)}e?Array.isArray(e)?v=u.visualization.arrayToDataTable(e):v=new u.visualization.DataTable(e):a&&o?v=u.visualization.arrayToDataTable([o,...a]):i?v=await st(u,i,h):v=u.visualization.arrayToDataTable([]);const b=v.getNumberOfColumns(),z=Array(b).fill(0).map((I,y)=>{const W=x.getColumnId(v,y);return C.includes(W)?{label:v.getColumnLabel(y),type:v.getColumnType(y),calc:()=>null}:y}),F=f.getChart();f.getChartType()==="Timeline"&&F&&F.clearChart(),f.setChartType(g),f.setOptions(s||{});const A=new u.visualization.DataView(v);A.setColumns(z),f.setDataTable(A),f.draw(),m&&m.draw(v),p&&(f.setDataTable(p),f.draw()),l&&(x.applyFormatters({dataTable:v,formatters:l,google:u}),f.setDataTable(v),f.draw()),(T===!0||P===!0)&&x.grayOutHiddenColumnsLabel(r,C)}),S(x,"getColumnId",(r,e)=>r.getColumnId(e)||r.getColumnLabel(e)),S(x,"applyFormatters",r=>{let{dataTable:e,formatters:n,google:a}=r;for(let o of n)switch(o.type){case"ArrowFormat":{new a.visualization.ArrowFormat(o.options).format(e,o.column);return}case"BarFormat":{new a.visualization.BarFormat(o.options).format(e,o.column);return}case"ColorFormat":{const s=new a.visualization.ColorFormat(o.options),{ranges:g}=o;if(g)for(let l of g)s.addRange(...l);s.format(e,o.column);return}case"DateFormat":{new a.visualization.DateFormat(o.options).format(e,o.column);return}case"NumberFormat":{new a.visualization.NumberFormat(o.options).format(e,o.column);return}case"PatternFormat":{new a.visualization.PatternFormat(o.options).format(e,o.column);return}default:{console.warn(`Unknown formatter type: ${o.type}`);return}}});let $=x;const lt=t=>{const{google:r,googleChartWrapper:e,googleChartDashboard:n}=t,[a,o]=c.useState([]);c.useEffect(()=>{e&&$.draw({...t,hiddenColumns:a,googleChartWrapper:e,googleChartDashboard:n,google:r})},[a,t.data,t.rows,t.columns,t.options,t.chartLoaderScriptUrl,t.chartType,t.formatters,t.spreadSheetUrl,t.spreadSheetQueryParameters,t.legendToggle,t.legend_toggle]);const s=()=>{const{googleChartWrapper:i}=t;i&&i.draw()},g=i=>{const h=[],{legendToggle:m,legend_toggle:f}=t;if($.draw({...t,hiddenColumns:a,googleChartWrapper:i,googleChartDashboard:n,google:r}),window.addEventListener("resize",s),f||m){const u=$.listenToLegendToggle(t,[a,o]);u&&h.push(u)}return h},l=(i,h)=>{window.removeEventListener("resize",s),h.forEach(m=>{r.visualization.events.removeListener(m)}),i.getChartType()==="Timeline"&&i.getChart()&&i.getChart().clearChart()};c.useEffect(()=>{if(!e)return;const i=g(e);return()=>{l(e,i)}},[e,g,l])},ct=t=>{const{chartEvents:r,google:e,googleChartWrapper:n}=t;if(r){if(!n){console.warn("listenToEvents was called before chart wrapper ready.");return}return r.map(a=>{let{eventName:o,callback:s}=a;return e.visualization.events.addListener(n,o,function(){for(var g=arguments.length,l=new Array(g),i=0;i<g;i++)l[i]=arguments[i];s({chartWrapper:n,props:t,google:e,eventArgs:l})})})}},ut=t=>{c.useEffect(()=>{if(!t.googleChartWrapper)return;const r=ct(t);return()=>{r==null||r.forEach(e=>{t.google.visualization.events.removeListener(e)})}},[t])},dt=t=>{const[r,e]=c.useState(null),[n,a]=c.useState(null),{addControls:o,renderControl:s}=at({...t,chartDashboard:n,chartWrapper:r});ut({...t,googleChartWrapper:r});const{chartId:g}=ot(t),l=c.useRef(null),i=c.useRef(null);c.useEffect(()=>{const{options:v,google:p,chartType:b,chartWrapperParams:z,toolbarItems:F,getChartEditor:A,getChartWrapper:I,onLoad:y}=t,W={chartType:b,options:v,containerId:g,...z},L=new p.visualization.ChartWrapper(W);L.setOptions(v||{}),I==null||I(L,p);const j=new p.visualization.Dashboard(l.current);F&&p.visualization.drawToolbar(i.current,F);let d=null;A&&(d=new p.visualization.ChartEditor,A({chartEditor:d,chartWrapper:L,google:p})),o({...t,chartDashboard:j,chartWrapper:L}),e(L),a(j),y==null||y(p,{google:p,chartWrapper:L,chartEditor:d,chartDashboard:j})},[]),lt({...t,googleChartWrapper:r,googleChartDashboard:n});const h=()=>{const{width:v,height:p,options:b,style:z,className:F,rootProps:A,google:I}=t,y={height:p||b&&b.height,width:v||b&&b.width,...z};return c.createElement("div",{id:g,style:y,className:F,...A})},m=()=>t.toolbarItems?c.createElement("div",{ref:i}):null,{width:f,height:u,options:C,style:T}=t,P={height:u||C&&C.height,width:f||C&&C.width,...T};return t.render?c.createElement("div",{ref:l,style:P},c.createElement("div",{ref:i,id:"toolbar"}),t.render({renderChart:h,renderControl:s,renderToolbar:m})):c.createElement("div",{ref:l,style:P},s(v=>{let{controlProp:p}=v;return p.controlPosition!=="bottom"}),h(),s(v=>{let{controlProp:p}=v;return p.controlPosition==="bottom"}),m())},gt=c.createContext(q),ht=t=>{let{children:r,value:e}=t;return c.createElement(gt.Provider,{value:e},r)},ft=t=>{const{google:r,isLoading:e,error:n}=G(t);return e?t.loader??null:n?t.errorElement??null:r?N.createElement(dt,{google:r,...t}):null},M=t=>{const r={...q,...t};return N.createElement(ht,{value:r},N.createElement(ft,r))};var V;(function(t){t.annotation="annotation",t.annotationText="annotationText",t.certainty="certainty",t.emphasis="emphasis",t.interval="interval",t.scope="scope",t.style="style",t.tooltip="tooltip",t.domain="domain"})(V||(V={}));const pt=()=>{const[t,r]=c.useState(""),[e,n]=c.useState(""),[a,o]=c.useState(""),[s,g]=c.useState(!1),{data:l}=K({category:t||void 0,type:e||void 0,paymentMethod:a||void 0,recurring:s?"true":void 0}),i=l==null?void 0:l.finances,h=X(),[m,f]=c.useState([{title:"Total Income",value:"0",detailsText:"View Details",bgColor:"bg-[#3b76ef]"},{title:"Total Expenses",value:"0",detailsText:"View Details",bgColor:"bg-[#63c7ff]"},{title:"Total Investment",value:"0",detailsText:"View Details",bgColor:"bg-[#a66dd4]"},{title:"Total Savings",value:"0",detailsText:"View Details",bgColor:"bg-[#6dd4b1]"}]),[u,C]=c.useState([]),[T,P]=c.useState([]);c.useEffect(()=>{if(i){const b=i.filter(d=>d.type==="INCOME").reduce((d,E)=>d+E.amount,0),z=i.filter(d=>d.type==="EXPENSE").reduce((d,E)=>d+E.amount,0),F=i.filter(d=>d.type==="INVESTMENT").reduce((d,E)=>d+E.amount,0),A=i.filter(d=>d.type==="SAVINGS").reduce((d,E)=>d+E.amount,0);f([{title:"Total Income",value:b.toFixed(2),detailsText:"View Details",bgColor:"bg-[#3b76ef]"},{title:"Total Expenses",value:z.toFixed(2),detailsText:"View Details",bgColor:"bg-[#63c7ff]"},{title:"Total Investment",value:F.toFixed(2),detailsText:"View Details",bgColor:"bg-[#a66dd4]"},{title:"Total Savings",value:A.toFixed(2),detailsText:"View Details",bgColor:"bg-[#6dd4b1]"}]);const I=i.reduce((d,E)=>(d[E.paymentMethod]=(d[E.paymentMethod]||0)+1,d),{}),y=[["Element","Payment Method",{role:"style"}],...Object.entries(I).map(([d,E])=>[d,E,d==="CASH"?"#FFA500":d==="CREDIT_CARD"?"#63c7ff":d==="DEBIT_CARD"?"#6dd4b1":d==="BANK_TRANSFER"?"#a66dd4":"#3b76ef"])];C(y);const W=i.filter(d=>d.recurring===!0).length,L=i.filter(d=>d.recurring===!1).length;P([["Task","Recurring Expenses"],["Recurring",W],["Other",L]])}},[i,t,e,a,s]);const v={pieSliceText:"label",slices:{0:{offset:.1,color:"#63c7ff"},1:{offset:.1,color:"#a66dd4"}}},p={backgroundColor:"transparent",legend:{textStyle:{color:h==="light"?"black":"white"}},hAxis:{textStyle:{color:h==="light"?"black":"white"},titleTextStyle:{color:h==="light"?"black":"white"}},vAxis:{textStyle:{color:h==="light"?"black":"white"},titleTextStyle:{color:h==="light"?"black":"white"}},titleTextStyle:{color:h==="light"?"black":"white"}};return w.jsx("div",{className:"flex h-full w-full",children:w.jsxs("div",{className:"flex-grow p-6",children:[w.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 xl:grid-cols-4 gap-6",children:m.map((b,z)=>w.jsx(Y,{title:b.title,value:b.value,detailsText:b.detailsText,bgColor:b.bgColor},z))}),w.jsxs("div",{className:"w-full mt-4 justify-between grid grid-cols-2 max-[850px]:grid-cols-1",children:[u.length>1?w.jsx(M,{chartType:"ColumnChart",width:"100%",height:"400px",data:u,options:p}):w.jsx("div",{className:"flex items-center justify-center h-400px",children:w.jsx("p",{className:"text-lg",children:"No Payment Method data available."})}),T.length>1?w.jsx(M,{chartType:"PieChart",data:T,options:{...p,...v},width:"100%",height:"400px"}):w.jsx("div",{className:"flex items-center justify-center h-400px",children:w.jsx("p",{className:"text-lg",children:"No Recurring Expenses data available."})})]})]})})};export{pt as default};
